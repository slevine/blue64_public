<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>With Grape, Groovy Is On Par with Native Scripting Languages | Steven Levine</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="With Grape, Groovy Is On Par with Native Scripting Languages" />
<meta name="author" content="Steven Levine" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="If you haven’t heard, the latest version of Groovy was released this week and included with it, among many other great features, was Grape (Groovy Advanced Packaging Engine). Grape is an annotation based dependency management system that provides functionality similar to that of Maven and Ivy with one clear advantage, namely, no build file." />
<meta property="og:description" content="If you haven’t heard, the latest version of Groovy was released this week and included with it, among many other great features, was Grape (Groovy Advanced Packaging Engine). Grape is an annotation based dependency management system that provides functionality similar to that of Maven and Ivy with one clear advantage, namely, no build file." />
<link rel="canonical" href="https://stevenlevine.dev/2009/12/with-grape-groovy-is-on-par-with-native-scripting-languages/" />
<meta property="og:url" content="https://stevenlevine.dev/2009/12/with-grape-groovy-is-on-par-with-native-scripting-languages/" />
<meta property="og:site_name" content="Steven Levine" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2009-12-24T14:31:36+00:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Steven Levine"},"description":"If you haven’t heard, the latest version of Groovy was released this week and included with it, among many other great features, was Grape (Groovy Advanced Packaging Engine). Grape is an annotation based dependency management system that provides functionality similar to that of Maven and Ivy with one clear advantage, namely, no build file.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://stevenlevine.dev/images/site-logo.png"},"name":"Steven Levine"},"headline":"With Grape, Groovy Is On Par with Native Scripting Languages","dateModified":"2009-12-24T14:31:36+00:00","datePublished":"2009-12-24T14:31:36+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://stevenlevine.dev/2009/12/with-grape-groovy-is-on-par-with-native-scripting-languages/"},"url":"https://stevenlevine.dev/2009/12/with-grape-groovy-is-on-par-with-native-scripting-languages/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/default.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i|Roboto:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="Steven Levine" href="/feed.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--post  with-grape-groovy-is-on-par-with-native-scripting-languages">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/about/">About</a></li><li><a href="/archives/">Archives</a></li><li><a href="/tags/">Tags</a></li><li><a href="/search/">Search</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
      <a href="/" class="site-logo" rel="home" title="Steven Levine">
        <img src="/images/site-logo.png" class="site-logo-img animated fadeInDown" alt="Steven Levine">
      </a>
    
    
    
      
        <div class="site-title animated fadeIn"><a href="/">Steven Levine</a></div>
      
      <p class="site-description animated fadeIn" itemprop="description">Working at Google Cloud, Hacker, Programmer, Cycling Geek, Scala Enthusiast,  who is fascinated with all things Data, Cloud, and Internet Scale.</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article class="h-entry">
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title p-name">With Grape, Groovy Is On Par with Native Scripting Languages
</h1>
        
      </header>

      <div class="page-sidebar">
        <div class="page-author h-card p-author"><img src="/images/author.jpg" class="author-avatar u-photo" alt="Steven Levine"><div class="author-info"><div class="author-name">
        <span class="p-name">Steven Levine</span>
      </div><ul class="author-links"><li class="author-link">
            <a class="u-url" rel="me" href="https://github.com/slevine"><i class="fab fa-github-square fa-lg" title="GitHub"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://twitter.com/_stevenlevine"><i class="fab fa-twitter-square fa-lg" title="Twitter"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://www.linkedin.com/in/levinesteve/"><i class="fab fa-linkedin fa-lg" title="LinkedIn"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://stackoverflow.com/users/63013/steven-levine"><i class="fab fa-stack-overflow fa-lg" title="StackOverflow"></i></a>
          </li><li class="author-link">
            <a class="u-url" rel="me" href="https://medium.com/@_stevenlevine"><i class="fab fa-medium fa-lg" title="Medium"></i></a>
          </li></ul>

<span class="read-time">4 min read</span>

    <time class="page-date dt-published" datetime="2009-12-24T14:31:36+00:00"><a class="u-url" href="">December 24, 2009</a>
</time>

  </div>
</div>

        

        
  <h3 class="page-taxonomies-title">Tags</h3>
  <ul class="page-taxonomies"><li class="page-taxonomy"><a href="/tags/#development" title="Pages tagged Development" rel="tag">Development</a></li><li class="page-taxonomy"><a href="/tags/#groovy" title="Pages tagged Groovy" rel="tag">Groovy</a></li><li class="page-taxonomy"><a href="/tags/#howto" title="Pages tagged Howto" rel="tag">Howto</a></li><li class="page-taxonomy"><a href="/tags/#java" title="Pages tagged Java" rel="tag">Java</a></li>
  </ul>


      </div>

      <div class="page-content">
        <div class="e-content">
          <p>If you haven’t heard, the latest version of Groovy was <a href="http://docs.codehaus.org/display/GROOVY/Groovy+1.7+release+notes">released</a> this week and included with it, among many other great features, was <a href="http://groovy.codehaus.org/Grape">Grape</a> (Groovy Advanced Packaging Engine). Grape is an annotation based dependency management system that provides functionality similar to that of Maven and Ivy with one clear advantage, namely, no build file.</p>

<p>If Grape doesn’t use a build file, how does it know what dependencies are necessary to run the code? Does it figure it out for you on the fly? Unfortunately, it is not that smart (yet), perhaps the next release. If it doesn’t figure it out for you, then how do you specify your dependencies? You configure your dependencies by using the<code class="highlighter-rouge">@Grapes</code> or <code class="highlighter-rouge">@Grab</code> annotations.</p>

<p>What is so good about being able to configure your dependencies via annotations?</p>

<p>If you are working with Groovy scripts, it frees you up from having to worry about dependency management and allows you to focus more on what the script needs to do much like when working with other scripting languages like Ruby or Perl. In order to clearly demonstrate the advantages of Grape, lets walk through an example.</p>

<p><strong>The problem</strong></p>

<p>Trying to keep up with my ever changing IP address after switching ISP’s earlier this year. There are several services running at my home that I need access to on a daily basis. If my IP changes over night, after a brown out, or for some other reason, I need to know about it asap.</p>

<p>In order to keep up with my IP address, I wrote a set of scripts that perform the following:</p>

<ul>
  <li>Obtains the current IP address of the server where it is running</li>
  <li>Looks up the most recent IP address of the server in a log file</li>
  <li>If the current IP address is different that the most recent IP address:
    <ul>
      <li>Updates the log file with the current IP address</li>
      <li>Send the new IP address in a customizable email to a configurable address</li>
    </ul>
  </li>
  <li>If the IP address’s are the same, it does nothing.</li>
</ul>

<p><strong>The Solution</strong></p>

<p>It took a total of three Groovy classes/scripts to solve this problem. We are not going to get in to the details of the solution because I want to stay focused on Grape.</p>

<blockquote>
  <p>You can find all of the code discussed in this post <a href="http://github.com/slevine/my-ip">on github</a>.
Please feel free to download and use it. Feedback is welcome as well.</p>
</blockquote>

<p>This simple Groovy class first connects to a mail server, and then sends the change of address message.</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/263323.js?file=Mailer.groovy"> </script>

<p>The most interesting things to pay attention to are:</p>

<ul>
  <li>The <code class="highlighter-rouge">@Grapes</code> block after all of the imports, you can see this groovy class depends on javax.activation and javax.mail jars.</li>
  <li>Thanks to Grapes, you can compile this class simply by invoking <code class="highlighter-rouge">groovyc Mailer.groovy</code> as opposed to having to configure either Maven, Gant, Ant, or some other build tool to manage the dependencies and classpath for you.</li>
  <li>What’s the big deal? Read more to find out!</li>
</ul>

<p>This next code snipped represents the “main” entry point of my solution. It simply obtains the current IP address of the machine it is running on, checks the current address against the most recent known address stored in a log file, and then uses the previous class to send an email if the IP address has changed.</p>

<noscript><pre>400: Invalid request</pre></noscript>
<script src="https://gist.github.com/263323.js?file=whatsMyIp.groovy"> </script>

<p>The most interesting thing to pay attention to in this script is:</p>

<ul>
  <li>The <code class="highlighter-rouge"><span class="err">#</span><span class="o">!</span><span class="s">/usr/</span><span class="n">bin</span><span class="o">/</span><span class="n">env</span> <span class="n">groovy</span></code> on the first line on the script.</li>
  <li>This line enables the script to be called directly from the command line like: <code class="highlighter-rouge">./whatsMyIp.groovy</code> instead of <code class="highlighter-rouge">groovy whatsMyIp.groovy</code></li>
</ul>

<p><strong>The Big Deal!</strong></p>

<p>If Grape didn’t exist the only way to invoke this script would be to invoke it with a build tool such as Maven, GAnt, or some other. If a build tool didn’t suit you then you would have to invoke <code class="highlighter-rouge">groovy -classpath=/path/activation.jar...</code> and manage the dependencies there. Both of these solutions work fine, but are clunky.</p>

<p>If you were to solve this problem using a language such as Ruby, you would not have to worry about dependency management since Ruby is so closely integrated with the OS. You would simply run <code class="highlighter-rouge">gem install some gem</code>, and this would install the dependencies at the OS level. Thus allowing you to focus on your script and letting the Ruby runtime focus on the dependencies. Invoking <code class="highlighter-rouge">./someScript.rb</code> is common in Ruby.</p>

<p>Grape gives Groovy scripts the same clean dependency abstraction. It is possible to invoke <code class="highlighter-rouge">./whatsMyIp.groovy</code> without having to worry about any dependency management. Once the groovy runtime comes across the Grape annotations, it loads the dependencies on demand freeing the Groovy script from having to be wrapped with a dependency management layer.</p>

<p>This is a huge deal because now simple Groovy scripts can leverage the entire Java ecosystem from the command line without having to wrap the invocation with a build tool. Groovy Scripts are now clean, simple, and easy. I hope this inspires you to go out and convert some Ruby or Perl script to Groovy.</p>

        </div>

        

        
          
  <div class="page-comments">
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function () {
        this.page.url = 'https://stevenlevine.dev/2009/12/with-grape-groovy-is-on-par-with-native-scripting-languages/';
        this.page.identifier = 'https://stevenlevine.dev/2009/12/with-grape-groovy-is-on-par-with-native-scripting-languages/';
      };

      (function() {
        var d = document, s = d.createElement('script');
        s.src = 'https://levinesteve.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>


        

        <nav class="page-pagination" role="navigation">
  
    <a class="page-previous" href="/2009/12/time-machine-over-a-network-drive/">
      <h4 class="page-pagination-label">Previous</h4>
      <span class="page-pagination-title">
        <i class="fas fa-arrow-left"></i> Time Machine over a Network Drive

      </span>
    </a>
  

  
    <a class="page-next" href="/2010/01/rubymine-2-debugging-issue-resolved/">
      <h4 class="page-pagination-label">Next</h4>
      <span class="page-pagination-title">
        RubyMine 2 Debugging Issue Resolved
 <i class="fas fa-arrow-right"></i>
      </span>
    </a>
  
</nav>

      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="/feed.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <p>&copy; 2021 Steven Levine. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script><script>
  if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-113658491-1', 'auto');
    ga('send', 'pageview');
  }
  </script>


  </body>

</html>
